<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.sxdata.jingwei.dao.SlaveDao">


    <select id="getSlaveTotalCount" resultType="java.lang.Integer">
        select count(1) from r_slave
    </select>

    <select id="getSlaveById" resultType="org.sxdata.jingwei.entity.SlaveEntity">
       select
          r.ID_SLAVE as slaveId,
          r.HOST_NAME as hostName,
          r.`PORT` as port,
          r.USERNAME as slaveUsername,
          r.PASSWORD as slavePassword
        from r_slave r where r.ID_SLAVE=#{id}
    </select>

    <select id="getSlaveByHostName" resultType="org.sxdata.jingwei.entity.SlaveEntity">
        select
        r.ID_SLAVE as slaveId,
        r.HOST_NAME as hostName,
        r.`PORT` as port,
        r.USERNAME as slaveUsername,
        r.PASSWORD as slavePassword
        from r_slave r where r.HOST_NAME=#{hostName}
    </select>

    <select id="getAllSlave" resultType="org.sxdata.jingwei.entity.SlaveEntity">
        select
        r.ID_SLAVE as slaveId,
        r.HOST_NAME as hostName,
        r.`PORT` as port,
        r.USERNAME as slaveUsername,
        r.PASSWORD as slavePassword
        from r_slave r WHERE 1=1
        <if test='_parameter!=null and _parameter!=""'>
            AND r.ID_SLAVE IN
            (
                select ID_SLAVE from
                d_user_group_slaves_relation where USER_GROUP_NAME=#{0}
            )
        </if>
    </select>

    <select id="findSlaveByPageInfo" resultType="org.sxdata.jingwei.entity.SlaveEntity">
        select
        r.ID_SLAVE as slaveId,
        r.HOST_NAME as hostName,
        r.`PORT` as port,
        r.USERNAME as slaveUsername,
        r.PASSWORD as slavePassword
        from r_slave r WHERE 1=1
        <if test='param3!=null and param3!=""'>
            AND r.ID_SLAVE IN
            (
                select ID_SLAVE from
                d_user_group_slaves_relation where USER_GROUP_NAME=#{2}
            )
        </if>
         limit #{0},#{1}
    </select>

</mapper>